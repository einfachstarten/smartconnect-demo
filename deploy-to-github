#!/bin/bash

# Script zum Pushen der SmartConnect Demo zu GitHub
# Verwendung: ./deploy-to-github.sh "Commit-Nachricht"

# Verzeichnis der Demo
DEMO_DIR="/home/.sites/689/site7951508/web/smartconnect-demo"
# Auth-Optionen (eine auswÃ¤hlen):
# Option 1: SSH (empfohlen)
REPO_URL="https://github.com/einfachstarten/smartconnect-demo.git"

# Option 2: HTTPS mit Personal Access Token
# REPO_URL="https://YOUR_TOKEN@github.com/einfachstarten/smartconnect-demo.git"

# Option 3: HTTPS (wird nach Credentials fragen)
# REPO_URL="https://github.com/einfachstarten/smartconnect-demo.git"

# Commit-Nachricht (Standard falls keine angegeben)
COMMIT_MSG="${1:-Update SmartConnect Demo}"

echo "ğŸš€ Deploying SmartConnect Demo to GitHub..."

# In Demo-Verzeichnis wechseln
cd "$DEMO_DIR" || {
    echo "âŒ Fehler: Verzeichnis $DEMO_DIR nicht gefunden!"
    exit 1
}

# Git initialisieren falls noch nicht geschehen
if [ ! -d ".git" ]; then
    echo "ğŸ“¦ Initialisiere Git Repository..."
    git init
    git branch -M main
fi

# Remote origin setzen/aktualisieren
echo "ğŸ”— Setze Remote Origin..."
git remote remove origin 2>/dev/null || true
git remote add origin "$REPO_URL"

# Alle Dateien hinzufÃ¼gen
echo "ğŸ“ FÃ¼ge Dateien hinzu..."
git add .

# Status anzeigen
echo "ğŸ“‹ Git Status:"
git status --short

# Commit erstellen
echo "ğŸ’¾ Erstelle Commit: $COMMIT_MSG"
git commit -m "$COMMIT_MSG"

# Zu GitHub pushen
echo "ğŸŒ Pushe zu GitHub..."
git push -u origin main --force

echo "âœ… Demo erfolgreich zu GitHub gepusht!"
echo "ğŸ”— Repository: https://github.com/einfachstarten/smartconnect-demo"